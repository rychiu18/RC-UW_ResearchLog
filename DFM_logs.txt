Log of DelftFM runs

08/08/24:
- Job 19878243 (TwinHarbors_test18):
  - Running with tides and MET
  - Made new observation file NOAA_WL_obs_new.xyn 
    - Removed NOAA_9439040
    - Changed WILLAPA-USGS site coordinates to -123.6526584, 46.65093418 so DFM can find it
    - Added GH_01, GH_02, GH_03, GH_04, GH_05, GH_05a, GH_05b, GH_06, and GH_07 coordinates based on StormSurgeExtent_GraysHarbor.ipynb (~10km increments from GH mouth to upstream)


08/07/24:
- Job 19870441 (TwinHarbors_test17):
  - Running for tides only
  - Model run for November 23 - December 12, 2023 to compare with 07/23/24 model run with new grid
  - Serve as baseline for new grid
  - Finished in ~7 hours
  - Could not find NOAA_9439040, WILLAPA-USGS

08/01/24:
- Job 19762170 (TwinHarbors_test16):
  - Running for tides only 
  - Testing restart file configurations
  - FlowFM_merged_20231112_000000_rst.nc from TwinHarbors_test13 (Job19758941) used
    - Model run was from November 8 - 20 (good output)
  - Restart date set to 20231112
  - Changed TStart date in FlowFM.mdu to RestartFile datetime (950400 seconds)
  - Accidentally left TEnd to Nov. 28, so took longer than usual
  - Completed, water levels look good and restartfile worked!

07/31/24:
- Job 19758941 (TwinHarbors_test13):
  - Running for tides only from November 8 - 20
  - Rerunning and setting RstIntervals because need that format for integrating RestartFile
  - RstInterval = 3600 604800 1641600

07/23/24:
- Job 19687905 (TwinHarbors_test15):
  - Running for tides, MET, discharge, and waves
  - Rerunning again bc disk quota exceeded for last run
    - Should have enough storage (2906GB left in group while checking)
  - Turning output parameters off to speed it up (=0) in FlowFM.mdu file:
    - Wrihis_sourcesink, Wrihis_structure_gen, Wrihis_structure_weir, Wrihis_turbulence, Wrihis_infiltration, Wrihis_salinity, Wrihis_density, Wrihis_upward_velocity_component, Wrihis_sediment, Wrihis_constituents, Wrimap_upward_velocity_component, Wrimap_density_rho, Wrimap_horizontal_viscosity_viu, Wrimap_horizontal_diffusivity_diu, Wrimap_spiral_flow, Wrimap_chezy, Wrimap_turbulence
  - Runtime updates:
    - After ~2-19 (2 days 19 hours), model has run up to 12-03 14:00:00
    - After ~6 (6 days), model has run up to 12-07 06:00:00
    - After ~6-19 (6 days and 19 hours), model has run up to 12-08 00:00:00 (245GB)
    - After ~7-09 (7 days and 9 hours), model has run up to 12-08 14:00:00 (254GB)
    - After ~7-19 (7 days and 19 hours), model has run up to 12-09 00:00:00 (261GB)
    - After ~8-02 (8 days and 2 hours), model has run up to 12-09 06:00:00 (265GB)
    - After ~9-20 (9 days and 20 hours), model has run up to 12-10 07:00:00
    - After ~12-02 (12 days and 2 hours), model has run up to 12-11 19:00:00
    - Model completed after 12-09:39:33 (12 days, 9 hours, 39 minutes), ran up to 12-12-23 00:00:00

07/19/24:
- Job 19436406 (TwinHarbors_test15):
  - Running for tides, MET, discharge, and waves
  - Rerunning again bc disk quota exceeded for last run
    - Should have enough storage (more than 258 GB left in server)
  - After 1-22:33:11 (1 day 22 hours), model is at 12-02 10:00
  - After 2-04:16:05 (2 days 04 hours), model is at 12-02 20:00 (187GB)
  - FAILED after running for 2-05:09:49
    - Disk quota exceeded


07/18/24:
- Job 19433780 (TwinHarbors_test15):
  - Running for tides, MET, discharge, and waves
  - Rerunning again bc accidentally stopped the last one
  - Added in new stations to NOAA_WL.xyn
    - CHEHALIS-MOUTH, CHEHALIS-PORTER, WILLAPA-MOUTH, WILLAPA-USGS
  - Extended run time in test.slurm to 14 days (336 hours)
  - Failed after ~9 hours due to disk quota exceeded error
    - Only able to run to Nov 25 0100

07/15/24:
- Job 19338596 (TwinHarbors_test15):
  - Running for tides, MET, discharge, and waves
  - Yingzhong fixed grid (removed small hole/cell in grid) - /mmfs1/gscratch/derakhti/users/yzlou/Delft3dfm/TwinHarbors_test2/dflowfm/final_mesh_net_new.nc
  - Replaced grid in folder with final_mesh_net_new.nc and edited .mdu file accordingly
  - Extended run time to 14 days b/c model running very slow (scontrol update jobid=19338596 TimeLimit=336)
    - As of 07/18/24 2200, model has been running for 3 days 6 hours and only produced 11 days and 8 hours
    - Command made job fail

- Job 19331548 (TwinHarbors_test15):
  - Running for tides, MET, discharge, and waves
  - Changed HisInterval to 3600 in FlowFM.mdu file
  - Added in waves folder and turned on waves module in FlowFM.mdu
  - Changed .dimr file to include wave module blocks (but made end time for waves interval as 41 days)
  - Run FAILED:
    - ERROR nNetElemMaxNode = 5. Expecting 3 or 4.
 ERROR: nNetElemMaxNode should be 3 or 4
 Wave exited abnormally
#### ERROR: dimr initialize ABORT with unknown exception
Dimr [2024-07-15 11:07:51.812219] #0 >> libdimr.so.Initialize(dimr_config_parallel.xml) returned error value -1
#### ERROR: dimr ABORT: libdimr.so.Initialize(dimr_config_parallel.xml) returned error value -1
#### ERROR: dimr ABORT: See messages above
Abort(1) on node 0 (rank 0 in comm 0): application called MPI_Abort(MPI_COMM_WORLD, 1) - process 0

07/13/24:
- Job 19311630 (TwinHarbors_test15):
  - Running for tides, MET, and discharge
  - Edited coordinates in .pli files to be within new grid
    - Porter (used Yingzhong's)
    - Satsop (used Yingzhong's)
    - Wynoochee (used Yingzhong's)
    - Willapa (used Yingzhong's)
    - Naselle (used new coordinates for new grid, Lewis and Clark highway overpass as arbitrary point chosen from most upstream visible conveyance)
- Changed TStop for .mdu file to match .am* files (3538800 which is equivalent to 983 hours)
  - This also matches up with discharge files
- Job COMPLETED
  - Took ~9 hours to complete
  - Water levels look normal with elevated water levels at Montesano (but still not 100% matching observations)

07/12/24:
- Job 19286486 (TwinHarbors_test15):
  - Only tides and MET
  - Changed oc_north.pli points to Yingzhong's (removes inner shelf points)
  - Changed to nodes (3) in test.slurm
  - Changed nNodes (3) and nProc (36) in submit_singularity.sh (total of 108 processors)
  - Removed Columbia discharge b/c not useful (not applicable to this bc only tides and MET)
  - Job failed BUT model run was successful!
    - End of .am* files reached b/c end time of .mdu and .am* files don't match, but still should be fine
      - .am* files go to 983 hours (40.9583 days), but .mdu file goes to 42
      - Water levels look normal!
    - Took ~7 hours to complete with 108 processors!

07/10/24:
- Job 19273326 (TwinHarbors_test15):
  - Only tides and MET
  - Removed discharge in forcing file and running for max 7 days
  - Water levels still exploded
  - Ended run after ~1.5 days b/c realized that I'm using the old northern boundary points
    - Will need to constrain northern boundary to not include inner shelf points that may lead to instabilities

07/08/24:
- Job 19254338 (TwinHarbors_test15):
  - Only tides, MET, and discharge
  - Set max run time to 20 hours in test.slurm file
  - Using new grid from Yingzhong (includes extended Chehalis, Satsop, Wynoochee, and Willapa) - final_mesh_net.nc
  - Added new points to .pli files
  - Running from Nov 23 to Dec 12
  - Changed nProc=32 in submit_singularity.sh file (32 partitions for new map)
  - Changes to FlowFM.mdu file
    - NetFile = final_mesh_net.nc
    - FixedWeirFile = sample_fxw.pliz
    - Other weir parameters (contraction, relaxcoef, etc)
    - Salinity = 0
    - InitialSalinity = 0
    - HisInterval = 300 1900800 3628800
    - Wrihis_balance = 0
    - Wrihis_infiltration = 0
  - Did not finish run due to short max run time (b/c of node maintenance)
    - Run only reached to Nov. 25 2300 (2 days and 23 hours)
    - Winds (x,y) are normal
    - CDIP036 explodes at ~Nov 25, 2110
      - Water levels, water depth, velocity magnitude, bottom stress, discharge magnitude
    - TIDE-5-MON (Montesano) explodes at ~Nov 25, 2220
      - Water levels, water depth, velocity magnitude, bottom stress, discharge magnitude

05/28/24:
- Job 18602553 (CEWA572_02):
  - Tides, MET, and waves
  - New SWAN grid with OOI buoy forcing on western and northern edges
  - Outputting 1D and 2Dspeectra data at select points

05/25/24:
- Job 18602553 (CEWA572):
  - Tides, MET, and waves
  - New SWAN grid with OOI buoy forcing on western and northern edges

05/06/24:
- Job 18090231 (TwinHarbors_test13):
  - Tides only
  - Configs: new dimr, submit, and slurp files
  - Changed start date to Nov. 8 ending Nov. 27 (TStart = 604800, TStop = 2332800)
  - Completed, water levels looked fine! :)


04/30/24:
- Job 17958894 (TwinHarbors_test11):
  - Using only MET forcing
  - Changed time to run for Nov. 15 - Nov. 27, 2023
  - Worked, had reasonable water levels.

04/29/24:
- Job 17945163 (TwinHarbors_test13):
  - Switched back to newer dimr, submit, and slurm files
  - Running with tides only
  - Changed start and end to Nov. 23 to Dec. 12

04/23/24:
- Job 17847851 (TwinHarbors_test10):
  - Switched back to dimr file with waves so should have T, MET, Q, and W
  - Failed: Reached max time limit (120 days - 5 days)
    - Completed up to December 8, 2023
- Job 17841266 (TwinHarbors_test10):
  - Changed TStop and HisInterval and MapInterval stop times to 3538800
  - Turned on waves, so has tides, MET, Q, and waves
  - Completed BUT forgot to switch back to dimr file with waves.
- Job 17835364 (TwinHarbors_test10):
  - Tides, MET, Q (running to entirety from Nov. 23 - Dec. 12 for CoPes all hands meeting)
  - Changed TStart to Nov. 23 (1900800)
  - Added FlowFM_test.ext to ExtForcingFile
  - Changed ExtForcingFileNew to FlowFM_bnd_test.ext
  - Failed bc TStop was end of Dec 12th but MET data only provides data up to Dec 11th, 2300
    - Forgot to turn on waves, so finished in 10 hours

04/19/24:
- Job 17808532 (TwinHarbors_test13):
  - Tides only
  - Use original slurm, dimr and submit files but removed waves block from dimr file
  - Model run starts on November 15
  - Water level at Tokepoint and Westport explodes at 42 hours 
  

04/18/24:
- Job 17805457 (TwinHarbors_test13):
  - TwinHarbors folder to start from scratch
  - Only implementing tides but changing TStart to November 15 (1209600) to see if water levels explode
  - Changed RefDate in .mdu file to 20231101
    - Left TEnd the same (27 days into the month)
    - Removed FlowFM.ext file (to remove MET forcing)
  - Removed discharge from FlowFM_bnd.ext file
  - Used new (Yingzhong's) dimr_.xml, submit_singularity.sh, and test.slurm scripts
  - Still blows up on hour 39


04/17/24:
- Job 17758936 (TwinHarbors_test10):
  - Contains just tides
  - Changed start date from November 14 to see if water levels blow up at same time
  - TStart, HisInterval, MapInterval = 1123200
  - Water level blows up again (~39 hours in)

04/16/24:
- Job 17738195 (TwinHarbors_test10):
  - Contains just tides
  - Changing start date from November 13 to see if it will work
  - TStart, HisInterval, MapInterval = 1036800
  - Water level blows up again after (~39 hours in @ both locations)

04/15/24:
- Job 17729364 (TwinHarbors_test10):
  - Contains just tides
  - Changing start date from Nov 18 to see if it will work
  - TStart = 1468800
  - WORKED: water levels at Tokepoint and Westport look reasonable
- Job 17718580 (TwinHarbors_test10):
  - Contains just tides
  - Using FlowFM_bnd_test_tides.ext without discharge to test
- Job 17717960 (TwinHarbors_test10):
  - Contains tides
  - Testing without any other forcings to see if they're the cause of exploding water levels
  - Removed FlowFM_bnd_test.ext file from .mdu file
  - FAILED: forgot tides are in FlowFM_bnd_test.ext
- Job 17709157 (TwinHarbors_test10):
  - Contains tides, discharge (merged)
  - Removed FlowFM_test.ext file from .mdu file
  - Testing without MET now to see if that is the cause of the exploding water levels
  - FAILED: water levels still exploded with just tides and discharge

04/14/24:
- Job 17705500 (TwinHarbors_test10):
  - Contains tides, MET, discharge (merged)
  - Testing without WAVES to see if that is the cause of the exploding water levels
    - Water levels still exploded

04/11/24:
- Job 17636131 (TwinHarbors_test10):
  - Contains tides, MET, discharge (merged), and waves
  - Changed start date to 11-15-2023
  - Failed, water levels explode after a day or two

04/05/24:
- Job 17530095 (TwinHarbors_test12):
  - Contains tides, waves
  - Extended start time in FlowFM.mdu file to begin on November 15, 2023
    - TStart = 1209600 # new
      - TStart = 1900800 (previous)
  - FAILED: Stuck on solving for Nov 15, 2023
    - Map and HisInterval start times were same as end time (source of error)
- Job 17530123 (TwinHarbors_test01):
  - Original Stantec model (T+M+D+W)
  - Rerun b/c previous ones failed with quota disk exceeded error
  - FAILED: disk quota exceeded error after 3 days 7 hours

03/30/24:
- Job 17452285 (TwinHarbors_test12):
  - Contains tides, waves
  - Running again to see if disk quota exceeded error is fixed after clearing space in folder
  - FAILED:
    - Ran for ~1d6hrs for ~11 modeled days
    - Disk quota exceeded
    - *** WARNING: unable to run SWAN using "swan.sh". Trying with "swan.bat" ...
sh: swan.bat: command not found
>>...End of SWAN run
*** ERROR: file 'norm_end' expected to signal a correct SWAN calculation
 ERROR: *** ERROR: file 'norm_end' expected to signal a correct SWAN calculation
 Wave exited abnormally

- Job 17451275 (TwinHarbors_test01):
  - Running original model again without any other models to see if it fixes the disk quota exceeded crash
  - FAILED:
    - Ran for ~1d6hrs for ~10 modeled days

03/29/24:
*Disk quota exceeded is because max storage in user account is 200G!!!
- Job 17447940 (TwinHarbors_test12):
  - Contains tides, waves
  - Removed discharge from FlowFM_bnd_test.ext
  - FAILED:
    - Ran for ~11 hours only
- Job 17447956 (TwinHarbors_test10):
  - Contains tides, discharge (w/merged Satsop and Porter), waves
  - Running again after changing mem to 300G to see if it fixes disk quota exceeded error
  - FAILED:
    - Ran for ~11 hours only
- Job 17447953 (TwinHarbors_test01):
  - Running original model again bc it failed with disk quota exceeded (changed mem to 300G to see if it fixes)
  - Using the new (Yingzhong's) test.slurm and submit file to let it run at the same time as another model run (QSFP limit)
  - FAILED:
    - Ran for ~11 hours only

03/28/24:
- Job 17433700 (TwinHarbors_test10):
  - Contains tides, discharge (w/merged Satsop and Porter), waves
  - Changed TStop to 3628800 (20 days after TStart)
  - Failed after 20 hours of runtime
    - Able to model ~11 days
    - Disk quota exceeded (mem was set to 100G, compute partition, so maybe changing that could fix it?)
- Job 17433652 (TwinHarbors_test01):
  - Running original model again bc it failed after 9 days
  - Changed MapInterval to match HisInterval
  - Failed after 20 hours of runtime
    - Able to model ~8 days
    - Disk quota exceeded (mem was set to 200G, maybe changing could fix it?)


03/27/24:
- Job 17419215 (TwinHarbors_test10):
  - Contains tides, discharge (w/merged Satsop and Porter), waves
  - Remove MET forcing to compare results
    - Removed "FlowFM_test.ext" from ExtForceFile parameter in FlowFM.mdu file
  - Used "compute" partition, changed memory (mem=100G), changed time (time=48:00:00)
  - Failed:
    - Only ran for ~13 hours, completed only ~10 days of modeling
    - "forrtl: Disk quota exceeded
forrtl: severe (38): error during write, unit -4883, file /mnt/data/rchiu18/TwinHarbors_test10/wave/BOTNOW"
    - Assumed that memory exceeded?
- Job 17418679 (TwinHarbors_test01):
  - Rerun original model to see if water levels and SSH are accurate
  - Failed:
    - Only ran for ~13 hours, completed only ~9 days of modeling
- Job 17417435 (TwinHarbors_test11):
  - Run without any forcings to see how water level/SSH changes over time
  - Changed to 2 days starting from 11/23
  - Removed waves block from dimr_config_parallel.xml file
  - Results
    - At Toke point, shows SSH=0 and waterdepth=1.42673181 (constant)
    - At Westport, shows SSH=0 and waterdepth=6.12327292 (constant)

03/08/24:
- Job 16936008 (TwinHarbors_test10):
  - Running 11/23/23 - 12/12/23
  - Tides, MET, discharge (using "chehalis_merged" for Satsop+Porter)
  - Edited FlowFM_bnd_test.ext to remove Satsop and Chehalis and include chehalis_merged for discharge forcing)
  - Set max model run time to be 81 hours (ran from 11/23/23 - 12/09/23 1900)
    - 403 hours of output out of 456 hours (roughly 1 hours of run time generates 5 hours of output)

03/05/24:
- Job 16869483 (TwinHarbors_test09):
  - Running 11/23/23 - 12/12/23
  - Tides, MET, discharge (merged Satsop and Chehalis into "chehalis_merged"
  - Edited FlowFM_bnd_test.ext to remove Satsop and Chehalis and include chehalis_merged for discharge forcing)
  - Changed partition to run on compute b/c computer-bigmem was taken
    - Changed on test.slurm (changed name and changed mem from 350 to 100G)
    - Changed on submit_singularity.sh

03/04/24:
- Job 16840900 (TwinHarbors_test09):
  - Running 11/23/23 - 12/12/23
  - Tides, MET, discharge (w/o Satsop)
  - Removed Satsop from FlowFM_bnd_test.ext
  - Running to test if Satsop plays an influence
    - Newer model with Satsop suggests a decrease in water levels
  - Results: Job16450943 did ~20cm better than this run even that job also did not include Satsop
    - Also did better at matching water levels than Job16784442 even though that run had Satsop included

03/02/24:
- Job 16798212 (TwinHarbors_test10):
  - Running 11/23/23 - 12/12/23
  - Tides, MET, discharge (w/Satsop), and waves
  - Changed TStop back to 3538800 seconds

03/01/24:
- Job 16796280 (TwinHarbors_test10):
  - Running 11/23/23 - 11/25/23 (2 days for testing)
  - Tides, MET, discharge (w/Satsop), and waves
  - Created new Waves.bcw file with new CDIP data
  - Added back Waves block in "dimr_config_parallel.xml" file
  - Changed TStop time to 2073600
  - Switched on WAVE parameter to 3 (SWAN) in .mdu file
  - Change Waves.mdw file
    - Changed ReferenceDate to 11-01-2023
  - Took 3:30 to complete successfully

02/29/24:
- Job 16784442 (TwinHarbors_test09):
  - Running 11/23/23 - 12/11/23
  - Tides, MET, and discharge
  - Included Naselle and Satsop (discharging at edge of boundary)
  - Using Columbia River (at Vancouver) for discharge 
  - Changed TStop time to 3538800 seconds

02/10/24:
- Job 16507878 (TwinHarbors_test09):
  - Running 11/23/23 - 12/11/23
  - Tides and MET (USED NEW 'ncep_202311_202312*' files from now on)
  - Started at 22:48, ended at 07:28 on 02/11/24 (model run of ~<9 hours)
    - Failed but probably bc didn't have final met timestamp
    - ** WARNING: Error while updating meteo/structure forcing at time=   3539100.00000000000
Dimr [2024-02-11 06:16:22.486231] #0 >> kernel: Error while updating meteo/structure forcing at time=   3539100.00000000000
** WARNING: ...
Dimr [2024-02-11 06:16:22.486261] #0 >> kernel: ...
** WARNING: Updating target failed, quantity='windx', itemId=       2
- Job 16507859 (TwinHarbors_test08):
  - Running 11/23/23 - 12/11/23
  - Only tides
  - Started at 22:35, ended at 06:59 on 02/11/24 (model run of ~<9 hours)

02/09/24:
- Job 16484702 (TwinHarbors_test09):
  - Rerun of previous day's TwinHarbors_test09
  - Changed start date to 1209600
  - For tides, met, and discharge
  - Started at 09:41, cancelled bc wanted to run other times instead
  - Cancelled after 1 day and 12 hours
  - Had output for 11/15 - 11/18 (20:00)

02/08/24:
- Job 16450943 (TwinHarbors_test09):
  - Model run from 11/23/23 - 12/11/23
  - Tides, met, and discharge
    - Added new discharge.bc files for all discharge points
      - Did not include Satsop b/c further upstream than Montesano
      - Put in new .pli file for Naselle River
  - Started at 00:36, ended at 08:42 (model run time of ~8 hours)
  - Output looks good, besides failing bc lack of met forcing (need to adjust final hours to go the length of the model)
  - Using old ncep_202311_to_202312* MET forcing files

- Job 16463612 (TwinHarbors_test08):
  - Model run from 11/15/23 - 12/11/23
  - Testing ONLY tides
  - Edited time:
    - TStart = 1209600
    - TStop = 3542400
  - Started at 15:34, ended bc not running fast enough
    - After 2 days and 1 hour, only have partial data from Nov 15 - Nov 19 (13:00)
    - Cancelled after 2 days and 6 hours bc not running fast enough!
- Job 16464184 (TwinHarbors_test09):
  - Model run from 11/15/23 - 12/11/23
  - Testing tides, met, and discharge
    - Created new discharge and met files
  - Started at 16:03, ended at 00:08 on 02/09/24
    - Messed up on start time so had to run model again

02/07/24:
- Job 16447890 (TwinHarbors_test08):
  - Changed run from 11/23/23 - 12/11/23
    - TStart = 1900800
    - TStop = 3542400
  - Only for tides to see results
  - Started at 21:59, ended at 05:22 on 02/08/24 (model run time of ~7 hours for 18 days)
  - Output looks good

02/06/24:
- Job 16411872 (TwinHarbors_test07)
  - Put back in MET forcing files (.amp, .amu, .amv)
  - Started 12:28, ended at 15:23 (failed after 02:55 of run time)
    - Mostly ran, except forcing file missing last hour of data

02/05/24:
- Job 16404103 (TwinHarbors_test07)
  - Starting on 12/01/23 for 7 days
  - Made tides ONLY to see if we still see weird water levels appear on hour 40
  - Started run at 23:50, ended at 02:45 on 02/06/24 (~<3 hours)
  - Water level data looks good! (except for weird artifact at north point of Willapa Bay)
- Job 16397467 (TwinHarbors_test06)
  - 4 day run starting on 11/15/23
  - Running with only tides to compare with tides and met forcing to see if water level anomalies still show after 40 hours
  - Using Yingzhong's new test.slurm and submit_singularity.sh configurations
  - Removed atmospheric forcing from the FlowFM_test.ext file
  - Started at 15:54, ended at 23:38 (~7:45 runtime) - 56 hours of data
- Job 16391479 (TwinHarbors_test07)
  - Created TwinHarbors_test07 to run 7 days (12/01-12/07/23) for storm and test to see if jump in water level is observed after ~46 hours
  - Changed test.slurm back to mem=200G, and time=72:00:00
  - Wrote new .amp, .amu, and .amv files for 7 days of forcing
  - Yingzhong helped debug "no FlowFM_000*.mdu" files found
    - Fixed by removing 0 from "CrsFile = " line in FlowFM.mdu file
    - Also had to change the ncep file extention from .amp to .amu in the .ext file (put .amp for u-wind by accident)
  - Ran to make sure it worked, then cancelled


02/05/24:
- Job 16385874 (TwinHarbors_test06)
  - Rewrote analysis script to plotDFMAtm_v2.py and verified it worked for all data (waterdepth at least)
  - Put back atmospheric forcing to model
  - Had to change partition to compute (instead of compute-bigmem)
    - Also had to change SBATCH --time=48:00:00 to keep within time limit (old was 72:00:00)
    - Changed mem=200G to mem=100G (this made it work on compute partition!)
  - Started 00:06 and ended 09:11
02/04/24:
- Job 16385359 (TwinHarbors_test06)
  - Changed .mdu files RefDate to 20231101 (before it was referenced to 20231115)
    - This means changing the TStart and TStop referenced to 20231101 (before it was referenced to 20231115)
      - TStart = 1209600
      - TStop = 1555200
    - Also changing HisInterval and MapInterval to reference to 20231101
      - HisInterval                       = 3600 1209600 1555200
      - MapInterval                       = 3600 1209600 1555200
  - Started at 21:44, cancelled at 22:13 (model run time of 28 minutes)
  - Worked showing reliable water depth using plotDFMAtm_v2.py!
- Job 16383865 (TwinHarbors_test06)
  - Made ONLY tides (turned off MET forcing to see if it causes the weird data)
    - Removed MET forcing in "FlowFM_test.ext" file
  - Started at 18:27, cancelled at 18:35, 8 minute runtime
  - Still weird data
- Job 16379406 (TwinHarbors_test06)
  - Rewrote met forcing and verified output was correct (MakeAtmGrid_v6.py)
  - Ran model again for 4 days to see if wind output is still psychedelic
  - Started at 01:41:00 and stopped at 01:05:00 (~12 hour run resulted in 54 hours of data)

02/01/24:
- Job 16352608 (TwinHarbors_test06)
  - Switched .dimr file back to exclude waves
  - Ran but cancelled after 9 hours 48 minutes (Got 50 hours of data - 2 days and 2 hours)
  - Still has that spike right after 40 hours
  - Wind field looks weird

- Job 16352586 (TwinHarbors_test06)
  - Placed back FlowFM_000*.mdu and .cache files
  - Placed back tw_v60m_1999_000*_net.nc files
  - If the .cache, .mdu, and _net.nc files aren't in, model won't run!
  - Changed the .dimr file back to include WAVES
  - Did not work when running wave portion (even though it's switched off in .mdu file

- Job 16352462 (TwinHarbors_test06)
  - Changed back to old submit_singularity.sh and test.slurm
  - Could not find FlowFM_000*.mdu files!
- Job 16351860 (TwinHarbors_test06)
  - Added newer test.slurm and submit_singularity.sh file (from Yingzhong)
    - test.slurm (changed nodes, ntasks-per-node, time, 'OMP_NUM_THREADS_SWAN=4')
    - submit_singularity.sh (changed to nNodes=1, nProc=16)
    - Deleted FlowFM_000*.mdu, FlowFM_000*.cache, tw_v60m_1999_000*_net.nc files (should work without)
    - Recreated interpolation over new meshgrid for .amp, .amu, and .amv files for dx=0.1, dy=0.1
      - Changed ncol and nrow to 83x83
      - Changed lower left center x,y start coordinate to minimum on interpolated grid
    - Changed time to run for 4 days (345600 seconds) still starting from 11-15-2023 in .mdu file
  - Ran with submit_singularity_new.sh and test_new.slurm from Yingzhong (but did not work)
    - "Error opening file FlowFM_0013.mdu"
    

01/29/24:
- Job 16288886 (TwinHarbors_test06)
  - Model for full MET (110123-121123) and tide data
  - Created .amp, .amu, and .amv files with matrix for entire time period
  - Changed .mdu files to correct time (27 day run)
  - Added back boundary forcing for tides
  - Changed MET forcing files in .ext file

01/28/24:
- Job 16283562 (TwinHarbors_test05)
  - Run for only 6 hours of time starting from 12012023 with only MET data
  - Rewrote .amp, .amu, .amv files
    - Changed to x_llcenter, y_llcenter
    - Resized to 52x71 dimensions based on interpolation
    - Wrote output to start from upper left corner

01/17/24:
- Job 16136872 (TwinHarbors_test05)
  - Added 2 spaces between each value and 2 spaces before the start of each array in the ncep_20231201.amp file (matching the ncep_1999 files)
  - Added 6 spaces between each value and 6 spaces before the start of each array in the ncep_20231201.amu/amv files (matching the ncep_1999 files)
  - Still only 51 grid points after running!
- Job 16135777 (TwinHarbors_test05)
  - Change grid_unit to ‘degree’ instead of ‘degrees’
  - Add space before first line for output files (u,v,p)
  - Only write to 3 floats for pressure and wind
  - Still only 51 grid points after running!

01/16/24:
- Job 16130670 (TwinHarbors_test05)
  - Changed amp, amu, and amv dx and dy to degrees instead of 12km
  - Still same, only had 51 grid points that were off
- Job 16127385 (TwinHarbors_test05)
  - Run only includes wind and pressure forcing
  - Changed to run for only 6 hours (21600 seconds)
    - Starting from 12-01-23
    -   TStart = 0
    -   TStop = 21600
  - Created new u, v, and pressure files (ncep_20231201_to_20231202)
    - Start lower left center at [43.0348848, -130.05956692]
    - ∆x = 12km; ∆y = 12km
  - Updated external forcing files to only contain amu, amv, and amp
    - For TIME = n hours since 12-01-23 00:00, remember to put in n+1 hours for forcing
  - Added FlowFM_00* and tw_v60_1999_00* files from TwinHarbors_test03 to file
    - Changed the start reference date and TStart and TStop in each file
  - Completed run in ~3 minutes!
    - Only created 51 grid points of uwind, vwind, and pressure data

01/10/24:
- (TwinHarbors_test04) - never completed, come back to it later on
  - Changed the filepaths to record output to dflow/output/
  - Used MakeDischarge.py file from local to create:
    - 'willapa_discharge.bc'
    - 'wynoochee_discharge.bc'
    - 'chehalis_discharge.bc'
    - 'columbia_discharge.bc'
    - Need to do Naselle, and Satsop
    - Need to make transects for discharge locations for Naselle and Satsop
    - Change FlowFM_bnd_test.ext to include discharges
    - Need to fill in atm files (amp, amu, amv) and add back into FlowFM_test.ext


01/04/24:
- Job 15966402 (TwinHarbors_test04)
  - Removed FlowFM_0* files (cache and mdu) and tw_v60m_1999_0*.net.nc files
  - Ran from TwinHarbors_test04 but saved in TwinHarbors_test03
  - Worked! Took 20 hours to complete

01/04/24:
- Job 15952640 (TwinHarbors_test03)
  - added tides back into external forcing file
  - Changed filename of Discharge.bc to Discharge_orig.bc
    - Emptied contents of Dicharge.bc
  - Took 19 hours
  - Only had one .his file for water level and winds (FlowFM_0000.his), other FlowFM_0001 and up did not have any .his files

12/28/23:
- Job 15836826(TwinHarbors_test03)
  - test.slurm
    - #SBATCH --chdir=/mmfs1/gscratch/derakhti/shared/rchiu18/TwinHarbors_test03 (line 19)
  - submit_singularity.sh
    - cd /mmfs1/gscratch/derakhti/shared/rchiu18/TwinHarbors_test03/dflowfm (line 99)
    - cd /mmfs1/gscratch/derakhti/shared/rchiu/TwinHarbors_test03 (line 105)
  - Created FlowFM_bnd_test.ext with nothing to use in FlowFM.mdu
  - Created FlowFM_test.ext with nothing to use in FlowFM.mdu
  - FlowFM.mdu
    - RefDate = 20231101             # Reference date [YYYY-MM-DD HH:MM:SS] (line 141)
    - TStart = 1296000              # Start time w.r.t. RefDate (in TUnit) (line 148)
    - TStop = 3628800              # Stop  time w.r.t. RefDate (in TUnit)(line 149)
    - HisInterval = 3600 1296000 3628800 # History output times, given as 'interval' 'start period' 'end period' (line 184)
    - CrsFile = 0 # Polyline file *_crs.pli defining observation cross sections (line 182)
    - ExtForceFileNew = FlowFM_bnd_test.ext # New format for external forcings file *.ext, link with bc-format boundary conditions specification (line 157)
    - ExtForceFile = FlowFM_test.ext # Old format for external forcings file *.ext, link with tim/cmp-format boundary conditions specification (line 156)
  - dimr)config_parallel.xml
    - Removed waves and parallel brackets pertaining to waves
  - FlowFM_000*.mdu (8 total)
    - RefDate = 20231101 # Reference date [YYYY-MM-DD HH:MM:SS] (line 141)
    - TStart = 1296000 # Start time w.r.t. RefDate (in TUnit) (line 148)
    - TStop = 3628800 # Stop  time w.r.t. RefDate (in TUnit) (line 149)
    - ExtForceFile = FlowFM.ext # Old format for external forcings file *.ext, link with tim/cmp-format boundary conditions specification (line 156)
    - ExtForceFileNew = FlowFM_bnd.ext # New format for external forcings file *.ext, link with bc-format boundary conditions specification (line 157)
    - HisInterval = 3600 1296000 3628800 # History output times, given as 'interval' 'start period' 'end period' (line 184)
    - MapInterval = 3600 1296000 2160000 # Map file output times, given as 'interval' 'start period' 'end period' (line 187) 
  - Took 10 minutes to complete
  - Did not work, forgot to put in tides in the external forcing file!

12/18/23:
- Job 15752705 (TwinHarbors_test02)
  - dimr_config_parallel.xml
    - Removed </time> and moved <start name="DflowFM"/> outside to control
  - ~9 hours for fun
- Job 15752666 (TwinHarbors_test02)
  - Recopied *.pli files b/c it contained transect locations
  - FAILED
    - Might have to do something with allocation of nodes/proc
- Job 15752640 (TwinHarbors_test02)
  - Discharge.bc
    - Added for discharge values
      1036800  0
      2332800  0
  - FAILED
- Job 15751378 (TwinHarbors_test02)
  - dimr_config_parallel.xml 
    - Removed "<start name="Waves"/>" (Line 36)
    - Removed 49-52: </component>....<component name="Waves">
  - FAILED:
      =   BAD TERMINATION OF ONE OF YOUR APPLICATION PROCESSES
      =   RANK 0 PID 88273 RUNNING AT n3008
      =   KILLED BY SIGNAL: 9 (Killed)
  - Maybe .dimr file?
- Job 15749723 (TwinHarbors_test02)
  - All *.pli's
    - Added 0's and "0001, 0002, 0003, etc" to end of line
  - FAILED
- Job 15749720 (TwinHarbors_test02)
  - Changed for TwinHarbors_test02
    -  test.slurm
      - Changed line 23 to:
        - #SBATCH --chdir=/mmfs1/gscratch/derakhti/shared/rchiu18/TwinHarbors_test02
    -  submit_singularity.sh
      - Changed line 99 to:
        - cd /mmfs1/gscratch/derakhti/shared/rchiu18/TwinHarbors_test02/dflowfm
      - Changed line 68 to:
        - cd /mmfs1/gscratch/derakhti/shared/rchiu18/TwinHarbors_test02
    - FlowFM.mdu
      - Changed line 135 to:
        - Wavemodelnr  = 0
    - Discharge.bc
      -  Removed Q from each river
    - All *.pli
      - Removed Q data
    - ncep*.amp, .amv, amu
      - n_cols = 0 (before 32)
      - n_rows = 0 (before 32)
  - FAILED 

11/27/23:
- Job 15466558
  - Changed “FlowFM.mdu”
    - Old
      - Tend = 1209600 
    - New (changed to 14 days)
      - Tend = 2246400
  - Changed “test.slurm”
    - Old
      - #SBATCH --time=24:00:00 
    - New (changed to 2 day max run time)
      - #SBATCH --time=48:00:00
  - Start test at 17:13pm on compute-bigmem partition
    - Job ID: 15466558
    - Uses 64 CPUs
- Job 15461143
  - Changed “FlowFM.mdu”
    - Old
      - Tend = 1054800 
    - New (changed to 48 hours)
      - Tend = 1209600
  - Changed “test.slurm”
    - Old
      - #SBATCH --time=1:00:00 
    - New
      - #SBATCH --time=24:00:00
  - Start test at 02:01pm on compute-bigmem partition
    - Job ID: 15461143
    - Uses 64 CPUs

11/25/23:
- Job 15448379
  - Changed “FlowFM.mdu”
    - Old
      - Tend = 2332800 
    - New (changed to 5 hours)
      - Tend = 1054800
  - Changed “test.slurm”
    - Old
      - #SBATCH --time=1:00:00 
    - New
      - #SBATCH --time=10:00:00
      - Added (email alert for test start and stop)
        - #SBATCH --mail-type=ALL
        - #SBATCH --mail-user=rchiu18
  - Start test at 16:22pm on compute-bigmem partition
    - Job ID: 15448379
    - Uses 64 CPUs

11/17/23:
- Job 15392871
  - Changed “dimr_config_parallel.xml”:
    - <time>0 3600 2592000</time> (old)
    - <time>0 3600 86400</time> (24 hr)
  - Changed “dimr_config_parallel_lib.xml”
    - <time>0 3600 2592000</time> (old)
    - <time>0 3600 86400</time> (24 hr)
  - There are some times in the FlowFM.mdu file and FlowFM_month.mdu but did not change them
  - Start test at 23:26 on compute-bigmem partition
    - Job ID: 15392871
  - Time limit exceeded based on slurm-15392871.out file
    - Need to change other times in “FlowFM.mdu” file
